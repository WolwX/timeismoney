CHANGELOG
================================================================================

Date : 14/10/2025

--------------------------------------------------------------------------------
V. 1.3.0 - Internationalisation & Édition Manuelle du Temps
--------------------------------------------------------------------------------

NOUVELLES FONCTIONNALITÉS MAJEURES

* **Base de Données Internationale de Salaires Minimums :**
    * **36 pays ajoutés** avec leurs salaires minimums réels
    * Organisation géographique : Europe (14 pays), Pays Riches (3), Amériques (6), Asie (7), Afrique (6)
    * Fourchette complète : de 0.10 $/h (Venezuela) à 24.50 CHF/h (Suisse) - ratio de 1:245
    * Nouveaux pays : Luxembourg, Irlande, Islande, Andorre, Venezuela, Ouganda, Soudan du Sud, etc.

* **Taux de Conversion NET Spécifiques par Pays :**
    * Chaque pays a son propre pourcentage de conversion BRUT → NET
    * Fourchette : 68% (Belgique) à 95% (Thaïlande, Ouganda, Soudan du Sud)
    * Application automatique lors de la sélection d'un preset pays
    * Reflète les réalités fiscales de chaque pays

* **Heures Hebdomadaires Réelles par Pays :**
    * Chaque pays a ses heures de travail légales hebdomadaires
    * Fourchette : 35h/semaine (France) à 52h/semaine (Corée du Sud)
    * Calcul dynamique des estimations mensuelles/annuelles basé sur les heures réelles
    * Affichage personnalisé : "Base XXh/sem." au lieu de "Base 35h/sem." fixe

* **Édition Manuelle du Temps du Timer :**
    * **Nouvelle fonctionnalité d'édition** : Clic sur l'affichage du temps quand le timer est en pause
    * Interface de dialogue intuitive avec 3 champs : Heures, Minutes, Secondes
    * Validation automatique (minutes et secondes < 60)
    * Icône d'édition (✏️) visible uniquement sur timers arrêtés
    * Recalcul automatique des gains après modification
    * Persistence immédiate dans le stockage
    * Confirmation visuelle avec message de succès

AMÉLIORATIONS TECHNIQUES

* **Modèle PresetRate Étendu :**
    * Nouveau champ `netRatePercentage` (défaut 77.6% pour France)
    * Nouveau champ `weeklyHours` (défaut 35.0h pour France)
    * Tous les presets mis à jour avec ces métadonnées

* **Calculs Dynamiques dans TimerDisplay :**
    * Remplacement des constantes fixes (1820h/an, 151.67h/mois)
    * Calcul basé sur `timer.weeklyHours` : 
      - hoursPerMonth = (weeklyHours × 52) / 12
      - hoursPerYear = weeklyHours × 52
    * Affichage dynamique du nombre d'heures par semaine

* **SingleTimer.setManualTime() :**
    * Nouvelle méthode pour définir manuellement le temps écoulé
    * Met à jour `elapsedDuration`, `pausedDuration` et recalcule les gains
    * Permet la reprise du timer à partir d'un temps personnalisé

* **MultiTimerController.editTimerTime() :**
    * Nouvelle méthode de contrôle pour sauvegarder les éditions
    * Déclenche la persistence et notifie les listeners

CORRECTIONS DE BUGS

* **Calcul NET du SMIC Français Corrigé :**
    * Passage de 77.0% à 77.6% pour le taux NET
    * Résultat : ~1398€/mois au lieu de ~1387€ (correction de +10.81€/mois)
    * Calcul précis : 1801.84€ BRUT × 0.776 = 1398.23€ NET

* **Application Complète des Presets :**
    * La méthode `_applyPreset()` applique maintenant 4 paramètres :
      - Taux horaire
      - Devise
      - Pourcentage NET
      - Heures hebdomadaires
    * Cohérence totale lors du changement de pays

DONNÉES AJOUTÉES

**Nouveaux Pays - Top 10 Riches :**
- Luxembourg : 14.50 €/h (85% NET, 40h/sem)
- Irlande : 13.00 €/h (80% NET, 39h/sem)
- Australie : 14.00 A$/h (83% NET, 38h/sem)
- Nouvelle-Zélande : 13.20 NZ$/h (85% NET, 40h/sem)
- Islande : 13.85 €/h (84% NET, 40h/sem)

**Nouveaux Pays - Top 10 Pauvres :**
- Venezuela : 0.10 $/h (88% NET, 40h/sem)
- Soudan du Sud : 0.15 $/h (95% NET, 48h/sem)
- Ouganda : 0.25 $/h (95% NET, 48h/sem)
- Bangladesh : 0.35 $/h (92% NET, 48h/sem)
- Pakistan : 0.40 $/h (90% NET, 48h/sem)
- Nigeria : 0.60 $/h (92% NET, 40h/sem)

**Autres Ajouts :**
- Andorre : 6.85 €/h (90% NET, 40h/sem)
- Déjà présents : France, Allemagne, Belgique, Espagne, Portugal, Pays-Bas, Royaume-Uni, Pologne, Russie, Suisse, USA, Canada, Brésil, Argentine, Mexique, Japon, Corée du Sud, Chine, Thaïlande, Inde, Afrique du Sud, Maroc, Kenya, Égypte

--------------------------------------------------------------------------------
TODO / FONCTIONNALITÉS FUTURES
--------------------------------------------------------------------------------

* **Import/Export de Configurations :**
    * Sauvegarde des réglages d'un timer dans un fichier
    * Import de configurations sauvegardées
    * Partage de configurations entre appareils

================================================================================

Date : 12/10/2025

--------------------------------------------------------------------------------
V. 1.2.0 - Système Multi-Timer & Améliorations UI
--------------------------------------------------------------------------------

NOUVELLES FONCTIONNALITÉS MAJEURES

* **Système Multi-Timer :**
    * Possibilité de gérer jusqu'à 2 timers simultanés
    * Chaque timer peut avoir des paramètres indépendants (taux, devise, réglages)
    * Activation/désactivation individuelle des timers
    * Affichage en 1 colonne (1 timer actif) ou 2 colonnes (2 timers actifs)
    * Zone centrale de contrôle avec boutons de synchronisation
    * Persistence complète des états de tous les timers

* **Gestion des Timers :**
    * Section dédiée dans les réglages pour gérer les timers
    * Ajout/suppression de timers (minimum 1, maximum 2)
    * Sélection du timer à configurer
    * Nommage personnalisable des timers

AMÉLIORATIONS UX/UI

* **Affichage du Titre de Taux :**
    * Remplacement de "Gains NETS" par le nom du réglage sélectionné
    * Affichage de "Kylian Mbappé", "Salaire Mensuel Brut", etc. selon le préréglage choisi
    * Titre visible sur l'écran principal et dans la liste des timers

* **Distinction Visuelle par Couleur :**
    * Timer 1 : Bordure cyan (bleu clair)
    * Timer 2 : Bordure orange
    * Couleurs cohérentes sur l'écran principal et dans les réglages
    * Section de paramètres colorée selon le timer sélectionné

* **Alignement et Hauteurs Fixes :**
    * Hauteurs fixes pour chaque section en mode 2 colonnes
    * Synchronisation parfaite des lignes entre les deux timers
    * Amélioration de la lisibilité et de l'esthétique

* **Indication du Timer en Configuration :**
    * Titre des paramètres affiche "(Timer 1)" ou "(Timer 2)"
    * Meilleure identification du timer en cours de modification

AMÉLIORATIONS TECHNIQUES

* **Architecture Multi-Timer :**
    * Nouveau modèle `SingleTimer` encapsulant l'état d'un timer
    * `MultiTimerController` pour gérer la collection de timers
    * Widget `TimerDisplay` réutilisable avec modes compact/full
    * Sérialisation JSON pour la persistance des timers

* **Contrôles Individuels et Globaux :**
    * `startTimer(index)`, `stopTimer(index)`, `resetTimer(index)` pour les contrôles individuels
    * `startAllTimers()`, `stopAllTimers()`, `resetAllTimers()` pour les contrôles globaux
    * `synchronizeTimers()` pour copier le temps du premier timer sur les autres

* **Gestion des Titres de Taux :**
    * Méthode `updateHourlyRateOnly()` pour mettre à jour le taux sans réinitialiser le titre
    * Conservation du nom du préréglage après application

--------------------------------------------------------------------------------
TODO / FONCTIONNALITÉS FUTURES
--------------------------------------------------------------------------------

* **Import/Export de Configurations :**
    * Sauvegarde des réglages d'un timer dans un fichier
    * Import de configurations sauvegardées
    * Partage de configurations entre appareils

================================================================================

Date : 01/10/2025

--------------------------------------------------------------------------------
V. 1.1.0 - Refonte des Taux, Tests & Améliorations UI
--------------------------------------------------------------------------------

NOUVELLES FONCTIONNALITÉS MAJEURES

* **Taux Net Réglable par l'Utilisateur :**
    * Ajout d'un paramètre persistant permettant à l'utilisateur de définir le pourcentage du taux BRUT qu'il reçoit en NET (par défaut 77% pour la France).
    * Tous les calculs d'estimation (heure, mensuel, annuel) utilisent désormais ce taux pour fournir des chiffres NETS personnalisés.

AMÉLIORATIONS UX/UI & TECHNIQUES

* **Affichage Prioritaire du Gain NET :**
    * Le compteur principal affiche désormais le gain NET (grosse police, couleur Jaune/Or).
    * Le gain BRUT est affiché comme référence secondaire.

* **Sablier d'Introduction Fiable :**
    * Un `AnimatedHourglass` en `CustomPainter` fournit un sablier animé local comme fallback, évitant les blocages réseau ou SVG lors du splash.

* **Fond Animé de Symboles Monétaires :**
    * Particules textuelles (symboles de devise) implémentées et optimisées (compte réduit, fréquence d'update plus basse) pour limiter l'impact CPU, surtout sur web.

* **Séparation de la Persistance :**
    * Introduction d'une interface `IStorageService` et d'une implémentation `SharedPreferences`.
    * Tests unitaires ajoutés avec un `FakeStorage` pour la logique du `TimerController`.

* **Footer & Versioning :**
    * `FooterBar` ajouté pour afficher les crédits et la version du build.
    * Lecture de la version priorise `pubspec.yaml` (si empaqueté dans les assets) puis `PackageInfo`.
    * Script `scripts/update_version.ps1` ajouté pour incrémenter le build number depuis le nombre de commits Git et relancer `flutter pub get`.

--------------------------------------------------------------------------------
V. 1.0.0 - Initialisation du Projet : Compteur Fonctionnel
--------------------------------------------------------------------------------

NOUVELLES FONCTIONNALITÉS

* **Compteur Temps/Gains Fonctionnel :**
    * Implémentation du compteur de temps principal (Heures:Minutes:Secondes).
    * Calcul des gains en temps réel basé sur un taux horaire défini.
* **Taux Horaire Modifiable et Persistant :**
    * L'utilisateur peut définir son propre taux horaire et sa devise, qui sont sauvegardés entre les sessions.
* **Préréglages de Taux (Presets) :**
    * Ajout d'une liste de taux prédéfinis (SMIC, métiers IT, salaires fun/sportifs, etc.) regroupés par catégorie.
* **Estimations de Salaire BRUT :**
    * Affichage des estimations de salaire Brut Mensuel et Annuel (basées sur 35h/semaine).

================================================================================